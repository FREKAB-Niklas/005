<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wire Harness Quote System</title>
</head>
<body>
    <h1>Wire Harness Quote System</h1>
    <p>Welcome to the wire harness quoting tool!</p>

    <!-- Form to input wire data -->
    <form id="wireForm">
        <label for="gauge">Wire Gauge:</label>
        <input type="number" id="gauge" name="gauge" required><br>

        <label for="source">Source:</label>
        <input type="text" id="source" name="source" required><br>

        <label for="destination">Destination:</label>
        <input type="text" id="destination" name="destination" required><br>

        <button type="button" onclick="submitData()">Submit</button>
    </form>

    <div>
        <h2>Generated Diagram:</h2>
        <img id="outputImage" src="" alt="Wire Harness Diagram" style="display:none; max-width: 500px;">
    </div>

    <div>
        <h2>YAML Content:</h2>
        <pre id="yamlContent" style="background-color: #f4f4f4; padding: 10px;"></pre>
    </div>

    <script>
function submitData() {
    const gauge = document.getElementById('gauge').value;
    const source = document.getElementById('source').value;
    const destination = document.getElementById('destination').value;

    const requestData = {
        gauge: gauge,
        source: source,
        destination: destination
    };

    console.log("Sending POST request with data:", requestData); // Debugging log

    // Send POST request to Flask server
    fetch('http://frekab005tester.local:5000/process', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(requestData)
    })
    .then(response => {
        console.log("Response received:", response); // Debugging log
        return response.json();
    })
    .then(data => {
        console.log("Data received:", data); // Debugging log

        // Set the PNG image source and display it
        const imgElement = document.getElementById('outputImage');
        imgElement.src = data.png_path;
        imgElement.style.display = 'block';

        // Display the YAML content
        document.getElementById('yamlContent').innerText = data.yaml_content;
    })
    .catch(error => {
        console.error('Error during POST request:', error);
    });
}

    </script>
</body>
</html>
